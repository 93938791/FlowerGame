import{p as Z,j as ue,l as ve,r as u,m as X,J as Be,D as pe,o as l,c as o,q as f,G as Y,a as e,v as $,F as ee,s as se,t as c,d as g,x as U,z as D,y as me,T as fe,B as ge,_ as be,M as Ie,n as Xe,K as Ue,b as re,w as Ae,e as Oe,H as Ne,I as ce,E as H}from"./bZTsdcjj.js";const Fe=Z("/icons/æ¸¸æˆ.png"),qe=Z("/icons/è¿è¡Œ.png"),de=Z("/icons/å†…å­˜æ¡.png"),De=Z("/icons/é—ªç”µ.png"),Ee={class:"create-room-modal"},Je={class:"modal-header"},ze={class:"modal-body"},He={class:"step-indicator"},Ze={key:0,class:"step-content"},Ke={key:0,class:"loading-state"},Qe={key:1,class:"empty-state"},We={key:2,class:"saves-grid"},Ye=["onClick"],es={class:"save-info"},ss={class:"save-name"},ts={class:"save-meta"},as={class:"meta-item"},ls={key:0,class:"meta-item"},os={class:"save-status"},ns={key:0,class:"status-badge enabled"},is={key:1,class:"status-badge disabled"},rs={key:0,class:"save-check"},cs={key:1,class:"step-content"},ds={class:"form-grid"},us={class:"form-group"},vs={class:"form-group"},ps={key:0,class:"form-hint error"},ms={key:1,class:"form-hint success"},fs={key:2,class:"form-hint"},gs={class:"form-group"},bs={key:2,class:"step-content"},ys={class:"confirm-section"},_s={class:"confirm-card"},hs={class:"confirm-row"},ks={class:"confirm-value"},$s={class:"confirm-row"},ws={class:"confirm-value"},Cs={class:"confirm-row"},xs={class:"confirm-value"},Ms={class:"confirm-row"},Gs={class:"confirm-value"},Vs={class:"modal-footer"},Ts=["disabled"],js=["disabled"],Ss=["disabled"],Rs={key:0,class:"btn-spinner"},Ps={key:1},Ls=ue({__name:"CreateRoomModal",props:{show:{type:Boolean},selectedVersion:{},username:{},uuid:{},accessToken:{},jvmArgs:{}},emits:["close","created"],setup(K,{emit:_}){const b=K,{fetchApi:E,networkStatus:N}=ge(),{showToast:d}=ve(),P=_,v=u(1),J=u(!1),G=u(!1),V=u([]),w=u(""),r=u(""),h=u(25565),C=u("survival"),k=u(""),x=u(!1);async function y(){if(!h.value||h.value<1024||h.value>65535){k.value="ç«¯å£å·å¿…é¡»åœ¨ 1024-65535 ä¹‹é—´",x.value=!1;return}try{const t=await(await E(`/api/room/check-port?port=${h.value}`)).json();t.ok?t.available?(k.value="",x.value=!0):(k.value=t.message,x.value=!1):(k.value=t.error||"æ£€æŸ¥ç«¯å£å¤±è´¥",x.value=!1)}catch(p){console.error("æ£€æŸ¥ç«¯å£å¤±è´¥:",p),k.value="",x.value=!0}}const T=X(()=>v.value===1?!!w.value:v.value===2?!!r.value.trim()&&h.value>=1024&&h.value<=65535:!0);function j(p){return{0:"ç”Ÿå­˜æ¨¡å¼",1:"åˆ›é€ æ¨¡å¼",2:"å†’é™©æ¨¡å¼",3:"æ—è§‚æ¨¡å¼",survival:"ç”Ÿå­˜æ¨¡å¼",creative:"åˆ›é€ æ¨¡å¼",adventure:"å†’é™©æ¨¡å¼",spectator:"æ—è§‚æ¨¡å¼"}[p]||"ç”Ÿå­˜æ¨¡å¼"}function A(p){w.value=p.name;const t={0:"survival",1:"creative",2:"adventure",3:"spectator"};C.value=t[p.game_mode]||"survival"}async function F(){T.value&&v.value<3&&(v.value===1&&(!r.value&&w.value&&(r.value=`${w.value}çš„æˆ¿é—´`),await y()),v.value++)}function q(){v.value>1&&v.value--}async function L(){J.value=!0;try{const t=`/api/room/saves${b.selectedVersion?`?version_id=${encodeURIComponent(b.selectedVersion)}`:""}`;console.log("Loading saves from:",t);const i=await E(t);if(!i.ok){try{const O=await i.json();console.error("åŠ è½½å­˜æ¡£å¤±è´¥ (APIé”™è¯¯):",O),O.error&&console.warn(`æœåŠ¡ç«¯é”™è¯¯: ${O.error}`)}catch{console.error(`åŠ è½½å­˜æ¡£å¤±è´¥ (HTTP ${i.status}):`,await i.text())}V.value=[];return}const S=await i.json();S.ok?V.value=S.saves||[]:(console.error("åŠ è½½å­˜æ¡£å¤±è´¥:",S.error),V.value=[])}catch(p){console.error("åŠ è½½å­˜æ¡£å¤±è´¥ (ç½‘ç»œ/è§£æé”™è¯¯):",p),V.value=[]}finally{J.value=!1}}async function M(){if(N.value&&!N.value.connected){d("æœªè¿æ¥åˆ° Easytier ç½‘ç»œï¼Œæ— æ³•åˆ›å»ºè”æœºæˆ¿é—´","error");return}if(!b.selectedVersion){d("æœªé€‰æ‹©æ¸¸æˆç‰ˆæœ¬","error");return}if(!G.value){G.value=!0;try{const p={room_name:r.value,save_name:w.value,port:h.value,password:null,game_mode:C.value,max_players:8,version_id:b.selectedVersion,username:b.username,uuid:b.uuid,access_token:b.accessToken,jvm_args:b.jvmArgs};console.log("åˆ›å»ºæˆ¿é—´ payload:",p);const i=await(await E("/api/room/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).json();i.ok?(P("created",i.room),P("close")):d(`åˆ›å»ºå¤±è´¥: ${i.error}`,"error")}catch(p){d(`åˆ›å»ºå¤±è´¥: ${p.message}`,"error")}finally{G.value=!1}}}return Be(()=>b.show,p=>{p&&(v.value=1,w.value="",r.value="",h.value=25565,C.value="survival",L(),N.value&&!N.value.connected&&d("æœªè¿æ¥åˆ° Easytier ç½‘ç»œï¼Œæ— æ³•åˆ›å»ºè”æœºæˆ¿é—´","error"))}),(p,t)=>(l(),pe(fe,{to:"body"},[K.show?(l(),o("div",{key:0,class:"modal-overlay",onClick:t[4]||(t[4]=Y(i=>p.$emit("close"),["self"]))},[e("div",Ee,[e("div",Je,[t[6]||(t[6]=e("div",{class:"header-icon"},"ğŸ®",-1)),t[7]||(t[7]=e("div",{class:"header-content"},[e("h3",{class:"modal-title"},"åˆ›å»ºè”æœºæˆ¿é—´"),e("p",{class:"modal-subtitle"},"é€‰æ‹©å­˜æ¡£å¹¶å¼€æ”¾å±€åŸŸç½‘ä¾›å¥½å‹åŠ å…¥")],-1)),e("button",{class:"close-btn",onClick:t[0]||(t[0]=i=>p.$emit("close"))},[...t[5]||(t[5]=[e("span",null,"âœ•",-1)])])]),e("div",ze,[e("div",He,[e("div",{class:$(["step",{active:v.value>=1,completed:v.value>1}])},[...t[8]||(t[8]=[e("span",{class:"step-num"},"1",-1),e("span",{class:"step-label"},"é€‰æ‹©å­˜æ¡£",-1)])],2),e("div",{class:$(["step-line",{active:v.value>1}])},null,2),e("div",{class:$(["step",{active:v.value>=2,completed:v.value>2}])},[...t[9]||(t[9]=[e("span",{class:"step-num"},"2",-1),e("span",{class:"step-label"},"æˆ¿é—´è®¾ç½®",-1)])],2),e("div",{class:$(["step-line",{active:v.value>2}])},null,2),e("div",{class:$(["step",{active:v.value>=3}])},[...t[10]||(t[10]=[e("span",{class:"step-num"},"3",-1),e("span",{class:"step-label"},"ç¡®è®¤åˆ›å»º",-1)])],2)]),v.value===1?(l(),o("div",Ze,[t[18]||(t[18]=e("div",{class:"section-header"},[e("span",{class:"section-icon"},"ğŸ“"),e("span",{class:"section-title"},"é€‰æ‹©è¦å¼€æ”¾çš„å­˜æ¡£")],-1)),J.value?(l(),o("div",Ke,[...t[11]||(t[11]=[e("div",{class:"spinner"},null,-1),e("span",null,"æ­£åœ¨åŠ è½½å­˜æ¡£åˆ—è¡¨...",-1)])])):V.value.length===0?(l(),o("div",Qe,[...t[12]||(t[12]=[e("div",{class:"empty-icon"},"ğŸ“­",-1),e("div",{class:"empty-text"},"æ²¡æœ‰æ‰¾åˆ°å­˜æ¡£",-1),e("div",{class:"empty-hint"},"è¯·å…ˆåˆ›å»ºä¸€ä¸ªå•äººæ¸¸æˆå­˜æ¡£",-1)])])):(l(),o("div",We,[(l(!0),o(ee,null,se(V.value,i=>(l(),o("div",{key:i.name,class:$(["save-card",{selected:w.value===i.name}]),onClick:S=>A(i)},[t[17]||(t[17]=e("div",{class:"save-icon"},"ğŸŒ",-1)),e("div",es,[e("div",ss,c(i.level_name||i.name),1),e("div",ts,[e("span",as,[t[13]||(t[13]=e("span",{class:"meta-icon"},"ğŸ“‚",-1)),g(" "+c(i.name),1)]),i.game_mode!==void 0?(l(),o("span",ls,[t[14]||(t[14]=e("span",{class:"meta-icon"},"ğŸ¯",-1)),g(" "+c(j(i.game_mode)),1)])):f("",!0)])]),e("div",os,[i.allow_commands?(l(),o("span",ns,[...t[15]||(t[15]=[e("span",null,"âœ“",-1),g(" å·²å¼€å¯ä½œå¼Š ",-1)])])):(l(),o("span",is,[...t[16]||(t[16]=[e("span",null,"â—‹",-1),g(" æœªå¼€å¯ä½œå¼Š ",-1)])]))]),w.value===i.name?(l(),o("div",rs,"âœ“")):f("",!0)],10,Ye))),128))]))])):f("",!0),v.value===2?(l(),o("div",cs,[e("div",ds,[e("div",us,[t[19]||(t[19]=e("label",{class:"form-label"},[e("span",{class:"label-icon"},"ğŸ "),g(" æˆ¿é—´åç§° ")],-1)),U(e("input",{"onUpdate:modelValue":t[1]||(t[1]=i=>r.value=i),type:"text",class:"form-input",placeholder:"ç»™ä½ çš„æˆ¿é—´èµ·ä¸ªåå­—",maxlength:"20"},null,512),[[D,r.value]])]),e("div",vs,[t[20]||(t[20]=e("label",{class:"form-label"},[e("span",{class:"label-icon"},"ğŸ”Œ"),g(" å¼€æ”¾ç«¯å£ ")],-1)),U(e("input",{"onUpdate:modelValue":t[2]||(t[2]=i=>h.value=i),type:"number",class:$(["form-input",{"input-error":k.value,"input-success":x.value&&!k.value}]),placeholder:"25565",min:"1024",max:"65535",onBlur:y},null,34),[[D,h.value,void 0,{number:!0}]]),k.value?(l(),o("div",ps,c(k.value),1)):x.value?(l(),o("div",ms,"âœ“ ç«¯å£å¯ç”¨")):(l(),o("div",fs,"å»ºè®®ä½¿ç”¨é»˜è®¤ç«¯å£ 25565"))]),e("div",gs,[t[22]||(t[22]=e("label",{class:"form-label"},[e("span",{class:"label-icon"},"ğŸ®"),g(" æ¸¸æˆæ¨¡å¼ ")],-1)),U(e("select",{"onUpdate:modelValue":t[3]||(t[3]=i=>C.value=i),class:"form-select"},[...t[21]||(t[21]=[e("option",{value:"survival"},"ç”Ÿå­˜æ¨¡å¼",-1),e("option",{value:"creative"},"åˆ›é€ æ¨¡å¼",-1),e("option",{value:"adventure"},"å†’é™©æ¨¡å¼",-1),e("option",{value:"spectator"},"æ—è§‚æ¨¡å¼",-1)])],512),[[me,C.value]])])])])):f("",!0),v.value===3?(l(),o("div",bs,[e("div",ys,[t[28]||(t[28]=e("div",{class:"confirm-title"},"ğŸ“‹ ç¡®è®¤æˆ¿é—´ä¿¡æ¯",-1)),e("div",_s,[e("div",hs,[t[23]||(t[23]=e("span",{class:"confirm-label"},"æˆ¿é—´åç§°",-1)),e("span",ks,c(r.value),1)]),e("div",$s,[t[24]||(t[24]=e("span",{class:"confirm-label"},"å­˜æ¡£åç§°",-1)),e("span",ws,c(w.value),1)]),e("div",Cs,[t[25]||(t[25]=e("span",{class:"confirm-label"},"å¼€æ”¾ç«¯å£",-1)),e("span",xs,c(h.value),1)]),e("div",Ms,[t[26]||(t[26]=e("span",{class:"confirm-label"},"æ¸¸æˆæ¨¡å¼",-1)),e("span",Gs,c(j(C.value)),1)]),t[27]||(t[27]=e("div",{class:"confirm-row"},[e("span",{class:"confirm-label"},"æˆ¿é—´ç±»å‹"),e("span",{class:"confirm-value"},"ğŸŒ å…¬å¼€æˆ¿é—´")],-1))]),t[29]||(t[29]=e("div",{class:"warning-box"},[e("div",{class:"warning-icon"},"âš ï¸"),e("div",{class:"warning-content"},[e("div",{class:"warning-title"},"æ³¨æ„äº‹é¡¹"),e("ul",{class:"warning-list"},[e("li",null,"å¿…é¡»è¿æ¥åˆ° Easytier è™šæ‹Ÿç½‘ç»œæ‰èƒ½åˆ›å»ºè”æœºæˆ¿é—´"),e("li",null,"åˆ›å»ºæˆ¿é—´åï¼Œæ¸¸æˆå°†è‡ªåŠ¨å¯åŠ¨å¹¶è¿›å…¥å­˜æ¡£"),e("li",null,"è¯·åœ¨æ¸¸æˆåŠ è½½å®Œæˆåæ‰‹åŠ¨è¿›å…¥å­˜æ¡£"),e("li",null,"ç³»ç»Ÿå°†è‡ªåŠ¨æ‰§è¡Œå‘½ä»¤å¼€æ”¾å±€åŸŸç½‘")])])],-1))])])):f("",!0)]),e("div",Vs,[v.value>1?(l(),o("button",{key:0,class:"footer-btn btn-secondary",onClick:q,disabled:G.value},[...t[30]||(t[30]=[e("span",null,"â†",-1),g(" ä¸Šä¸€æ­¥ ",-1)])],8,Ts)):f("",!0),t[32]||(t[32]=e("div",{class:"footer-spacer"},null,-1)),v.value<3?(l(),o("button",{key:1,class:"footer-btn btn-primary",onClick:F,disabled:!T.value},[...t[31]||(t[31]=[g(" ä¸‹ä¸€æ­¥ ",-1),e("span",null,"â†’",-1)])],8,js)):f("",!0),v.value===3?(l(),o("button",{key:2,class:"footer-btn btn-success",onClick:M,disabled:G.value},[G.value?(l(),o("span",Rs)):(l(),o("span",Ps,"ğŸš€")),g(" "+c(G.value?"åˆ›å»ºä¸­...":"åˆ›å»ºæˆ¿é—´"),1)],8,Ss)):f("",!0)])])])):f("",!0)]))}}),Bs=Object.assign(be(Ls,[["__scopeId","data-v-44bf9b5d"]]),{__name:"CreateRoomModal"}),Is={class:"multiplayer-container"},Xs={class:"multiplayer-grid"},Us={class:"multiplayer-left"},As={class:"panel-section"},Os={key:0,class:"loading-hint"},Ns={key:1,class:"empty-hint"},Fs={key:2,class:"version-grid"},qs=["onClick"],Ds={class:"version-details"},Es={class:"version-name"},Js={class:"version-actions"},zs={key:0,class:"version-check"},Hs=["onClick"],Zs={class:"delete-modal"},Ks={class:"modal-body"},Qs={class:"delete-warning"},Ws={class:"confirm-input-group"},Ys={class:"modal-footer"},et=["disabled"],st={key:0,class:"btn-spinner"},tt={key:0,class:"launch-settings"},at={class:"launch-form"},lt={class:"launch-form-group"},ot={class:"launch-form-group"},nt={class:"launch-form-group"},it={class:"launch-form-group advanced-toggle"},rt={class:"toggle-icon"},ct={key:0,class:"advanced-options"},dt={class:"launch-form-group"},ut={class:"launch-buttons"},vt=["disabled"],pt={class:"btn-icon"},mt={class:"btn-text"},ft=["disabled"],gt={class:"btn-text"},bt={key:0,class:"launch-output"},yt={class:"multiplayer-right"},_t={key:0,class:"panel-section login-info-card"},ht={class:"login-info-content"},kt={key:0,class:"account-type"},$t={key:1,class:"account-type"},wt={key:1,class:"panel-section room-status-card"},Ct={class:"room-status-header"},xt={class:"room-status-icon"},Mt={class:"room-status-info"},Gt={class:"room-name"},Vt={class:"room-details"},Tt={class:"room-detail-item"},jt={class:"detail-value"},St={class:"room-detail-item"},Rt={class:"detail-value"},Pt={class:"room-detail-item"},Lt={class:"detail-value"},Bt={class:"room-detail-item"},It={key:0,class:"room-detail-item full-width"},Xt={class:"detail-value highlight"},Ut={key:0,class:"room-connect-info"},At={class:"connect-address"},Ot={key:2,class:"panel-section"},Nt={key:0,class:"loading-hint"},Ft={key:1,class:"empty-hint"},qt={key:2,class:"room-list"},Dt={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"12px"}},Et={style:{display:"flex","align-items":"center",gap:"12px"}},Jt={class:"version-name"},zt={style:{"font-size":"12px",color:"#94a3b8"}},Ht={class:"room-connect-info",style:{"margin-top":"12px"}},Zt={class:"connect-address"},Kt=["onClick"],Qt={key:3,class:"panel-section multiplayer-card"},Wt=ue({__name:"multiplayer",setup(K){const{accountInfo:_,offlineAccount:b,loadAccountFromCache:E,loadOfflineFromCache:N}=Ie(),{showToast:d}=ve(),{fetchApi:P,rooms:v,init:J,networkStatus:G}=ge(),V=u(!1),w=X(()=>G.value&&G.value.connected),r=X(()=>v.value.find(a=>a.is_local)||null),h=X(()=>v.value.filter(a=>!a.is_local)),C=u(!1),k=u([]),x=u(!1),y=u("");u("");const T=u(2),j=u(4),A=u("G1GC"),F=u(""),q=u(!1),L=u(!1),M=u(""),p=u(!1),t=u(null),i=u(""),S=u(!1),O=X(()=>!!_.value||!!b.value),ye=X(()=>_.value?_.value.name:b.value?b.value:"Player"),_e=X(()=>_.value?.id||""),he=X(()=>_.value?.minecraft_token||"");async function ke(){try{const s=await(await P("/api/system/info")).json();if(s.ok&&s.memory){const m=s.memory.total_gb;T.value=Math.max(2,Math.floor(m*.25)),j.value=Math.max(4,Math.min(Math.floor(m*.5),Math.floor(m*.75))),console.log(`âœ… ç³»ç»Ÿå†…å­˜: ${m.toFixed(2)}GB, æ¨èé…ç½®: æœ€å°${T.value}GB, æœ€å¤§${j.value}GB`)}else T.value=2,j.value=4,console.warn("æ— æ³•è·å–ç³»ç»Ÿä¿¡æ¯ï¼Œä½¿ç”¨é»˜è®¤å†…å­˜é…ç½®")}catch(a){T.value=2,j.value=4,console.error("è·å–ç³»ç»Ÿä¿¡æ¯å¤±è´¥:",a)}}function te(){const a=[`-Xms${T.value}G`,`-Xmx${j.value}G`,"-XX:+UnlockExperimentalVMOptions"];if(A.value==="G1GC"?a.push("-XX:+UseG1GC","-XX:G1NewSizePercent=20","-XX:G1ReservePercent=20","-XX:MaxGCPauseMillis=50","-XX:G1HeapRegionSize=32M"):A.value==="ZGC"?a.push("-XX:+UseZGC"):A.value==="ParallelGC"&&a.push("-XX:+UseParallelGC"),F.value.trim()){const s=F.value.trim().split(/\s+/).filter(m=>m.length>0);a.push(...s)}return a}async function ae(){x.value=!0;try{const s=await(await P("/api/minecraft/installed-versions")).json();s.ok&&s.versions&&Array.isArray(s.versions)&&(k.value=s.versions.filter(m=>m.jar_exists&&m.json_exists))}catch(a){console.error("åŠ è½½å·²å®‰è£…ç‰ˆæœ¬å¤±è´¥:",a),d(`åŠ è½½å¤±è´¥: ${a.message}`,"error")}finally{x.value=!1}}function $e(a){y.value=a}function we(a){return{fabric:"Fabric",forge:"Forge",neoforge:"NeoForge",optifine:"OptiFine",release:"åŸç‰ˆ",snapshot:"åŸç‰ˆ"}[a?.toLowerCase()]||"åŸç‰ˆ"}function Ce(a,s){if(s&&["fabric","forge","neoforge","optifine"].includes(s.toLowerCase()))return we(s);const m=a.toLowerCase();return m.includes("fabric")?"Fabric":m.includes("neoforge")?"NeoForge":m.includes("forge")?"Forge":m.includes("optifine")?"OptiFine":"åŸç‰ˆ"}function le(a,s){if(s){const B={fabric:"loader-fabric",forge:"loader-forge",neoforge:"loader-neoforge",optifine:"loader-optifine",release:"loader-vanilla",snapshot:"loader-vanilla"}[s.toLowerCase()];if(B)return B}const m=a.toLowerCase();return m.includes("fabric")?"loader-fabric":m.includes("neoforge")?"loader-neoforge":m.includes("forge")?"loader-forge":m.includes("optifine")?"loader-optifine":"loader-vanilla"}function xe(a){t.value=a,i.value="",p.value=!0}function Q(){p.value=!1,t.value=null,i.value=""}async function oe(){if(!(i.value!=="ç¡®è®¤åˆ é™¤"||!t.value)){S.value=!0;try{const s=await(await P("/api/minecraft/delete-version",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({version_id:t.value.id})})).json();s.ok?(d(`ç‰ˆæœ¬ ${t.value.id} å·²åˆ é™¤`,"success"),y.value===t.value.id&&(y.value=""),await ae(),Q()):d(`åˆ é™¤å¤±è´¥: ${s.error}`,"error")}catch(a){d(`åˆ é™¤å¤±è´¥: ${a.message}`,"error")}finally{S.value=!1}}}function Me(){if(!y.value){d("è¯·å…ˆé€‰æ‹©æ¸¸æˆç‰ˆæœ¬","error");return}if(!O.value){d("è¯·å…ˆç™»å½•è´¦å·","error");return}V.value=!0}function Ge(a){d(`æˆ¿é—´ "${a.name}" åˆ›å»ºä¸­...`,"success"),W()}async function Ve(){if(r.value)try{const s=await(await P("/api/room/close",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({room_id:r.value.room_id})})).json();s.ok?(d("æˆ¿é—´å·²å…³é—­","success"),W()):d(`å…³é—­å¤±è´¥: ${s.error}`,"error")}catch(a){d(`å…³é—­å¤±è´¥: ${a.message}`,"error")}}function Te(a){const s=`${a.virtual_ip}:${a.port}`;navigator.clipboard.writeText(s).then(()=>{d("å·²å¤åˆ¶åˆ°å‰ªè´´æ¿","success")}).catch(()=>{d("å¤åˆ¶å¤±è´¥","error")})}function je(){if(!r.value)return;const a=`${r.value.virtual_ip}:${r.value.port}`;navigator.clipboard.writeText(a).then(()=>{d("å·²å¤åˆ¶åˆ°å‰ªè´´æ¿","success")}).catch(()=>{d("å¤åˆ¶å¤±è´¥","error")})}function Se(a){return{creating:"â³",waiting:"â³",publishing:"ğŸ“¡",open:"âœ…",closed:"ğŸ”’",error:"âŒ"}[a]||"â“"}function ne(a){return{creating:"åˆ›å»ºä¸­",waiting:"ç­‰å¾…æ¸¸æˆåŠ è½½",publishing:"å¼€æ”¾å±€åŸŸç½‘ä¸­",open:"å·²å¼€æ”¾",closed:"å·²å…³é—­",error:"åˆ›å»ºå¤±è´¥"}[a]||"æœªçŸ¥"}function Re(a){return{survival:"ç”Ÿå­˜æ¨¡å¼",creative:"åˆ›é€ æ¨¡å¼",adventure:"å†’é™©æ¨¡å¼",spectator:"æ—è§‚æ¨¡å¼"}[a]||"ç”Ÿå­˜æ¨¡å¼"}async function W(){if(!C.value){C.value=!0,console.log("Refreshing room list...");try{const s=await(await P("/api/room/list")).json();s.ok&&Array.isArray(s.rooms)&&(v.value=s.rooms,console.log("HTTP Room list updated:",s.rooms))}catch(a){console.error("åŠ è½½æˆ¿é—´åˆ—è¡¨å¤±è´¥:",a),d("åˆ·æ–°å¤±è´¥","error")}finally{C.value=!1}}}async function Pe(a){if(console.log("ğŸš€ å¼€å§‹å¯åŠ¨æ¸¸æˆ..."),console.log("é€‰ä¸­çš„ç‰ˆæœ¬:",y.value),!y.value){d("è¯·å…ˆé€‰æ‹©è¦å¯åŠ¨çš„ç‰ˆæœ¬","error");return}L.value=!0,M.value="";try{let s="",m="",n="";if(console.log("accountInfo:",_.value),console.log("offlineAccount:",b.value),b.value)s=b.value,console.log("ä½¿ç”¨ç¦»çº¿è´¦å·:",s);else if(_.value)s=_.value.name,m=_.value.id,n=_.value.minecraft_token||"",console.log("ä½¿ç”¨æ­£ç‰ˆè´¦å·:",s);else{d("è¯·å…ˆç™»å½•è´¦å·","error"),L.value=!1;return}M.value=`æ­£åœ¨å¯åŠ¨ Minecraft ${y.value}...
`;const B=te();console.log("JVM å‚æ•°:",B);const ie={version_id:y.value,username:s,uuid:m,access_token:n,jvm_args:B};if(a&&typeof a=="string"){M.value+=`ğŸ”— å°†è‡ªåŠ¨è¿æ¥åˆ°æœåŠ¡å™¨: ${a}
`;let R=a,I="25565";const z=a.lastIndexOf(":"),Le=a.lastIndexOf("]");z>-1&&z>Le&&(R=a.substring(0,z),I=a.substring(z+1)),ie.extra_game_args=["--server",R,"--port",I]}else console.log("serverAddress is not a string or empty:",a,typeof a);console.log("Sending fetch request to /api/minecraft/launch...");try{const R=await P("/api/minecraft/launch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ie)});console.log("å“åº”çŠ¶æ€:",R.status);const I=await R.json();console.log("å“åº”ç»“æœ:",I),I.ok?(M.value+=`âœ… æ¸¸æˆå¯åŠ¨æˆåŠŸï¼PID: ${I.pid}
`,d(`Minecraft ${y.value} å¯åŠ¨æˆåŠŸï¼`,"success")):(M.value+=`âŒ å¯åŠ¨å¤±è´¥: ${I.error}
`,d(`å¯åŠ¨å¤±è´¥: ${I.error}`,"error"))}catch(R){throw console.error("Fetch Error:",R),M.value+=`âŒ è¯·æ±‚å‘é€å¤±è´¥: ${R}
`,d(`è¯·æ±‚å‘é€å¤±è´¥: ${R}`,"error"),R}}catch(s){M.value+=`âŒ å¯åŠ¨å¼‚å¸¸: ${s.message}
`,d(`å¯åŠ¨å¼‚å¸¸: ${s.message}`,"error")}finally{L.value=!1}}return Xe(async()=>{J(),ae(),ke(),await E(),await N(),console.log("âœ… é¡µé¢åŠ è½½å®Œæˆ"),console.log("æ­£ç‰ˆè´¦å·:",_.value),console.log("ç¦»çº¿è´¦å·:",b.value)}),Ue(()=>{}),(a,s)=>{const m=Oe;return l(),o("div",Is,[e("div",Xs,[e("div",Us,[e("div",As,[s[18]||(s[18]=e("h3",{class:"section-title"},[e("img",{src:Fe,class:"section-icon-img",alt:"æ¸¸æˆ"}),g(" é€‰æ‹©æ¸¸æˆç‰ˆæœ¬ ")],-1)),x.value?(l(),o("div",Os,[...s[7]||(s[7]=[e("span",{class:"loading-icon"},"â³",-1),e("span",null,"æ­£åœ¨åŠ è½½å·²å®‰è£…çš„ç‰ˆæœ¬...",-1)])])):k.value.length===0?(l(),o("div",Ns,[s[9]||(s[9]=e("div",{class:"empty-icon"},"ğŸ“¦",-1)),s[10]||(s[10]=e("div",{class:"empty-text"},"è¿˜æ²¡æœ‰ä¸‹è½½ä»»ä½•ç‰ˆæœ¬",-1)),re(m,{to:"/game",class:"qq-btn qq-btn-primary"},{default:Ae(()=>[...s[8]||(s[8]=[g("å‰å¾€ä¸‹è½½",-1)])]),_:1})])):(l(),o("div",Fs,[(l(!0),o(ee,null,se(k.value,n=>(l(),o("div",{key:n.id,class:$(["version-card",{selected:y.value===n.id,[le(n.id,n.type)]:!0}]),onClick:B=>$e(n.id)},[e("div",Ds,[e("div",Es,[e("span",{class:$(["loader-badge-small",le(n.id,n.type)])},c(Ce(n.id,n.type)),3),g(" "+c(n.id),1)])]),e("div",Js,[y.value===n.id?(l(),o("div",zs,[...s[11]||(s[11]=[e("span",{class:"check-icon"},"âœ“",-1)])])):f("",!0),e("button",{class:"delete-btn",onClick:Y(B=>xe(n),["stop"]),title:"åˆ é™¤æ­¤ç‰ˆæœ¬"},[...s[12]||(s[12]=[e("span",{class:"delete-icon"},"ğŸ—‘ï¸",-1)])],8,Hs)])],10,qs))),128))])),(l(),pe(fe,{to:"body"},[p.value?(l(),o("div",{key:0,class:"modal-overlay",onClick:Y(Q,["self"])},[e("div",Zs,[s[17]||(s[17]=e("div",{class:"modal-header"},[e("span",{class:"modal-icon"},"âš ï¸"),e("h3",{class:"modal-title"},"åˆ é™¤æ¸¸æˆç‰ˆæœ¬")],-1)),e("div",Ks,[e("p",Qs,[s[13]||(s[13]=g(" æ‚¨ç¡®å®šè¦åˆ é™¤ç‰ˆæœ¬ ",-1)),e("strong",null,c(t.value?.id),1),s[14]||(s[14]=g(" å—ï¼Ÿ ",-1))]),s[16]||(s[16]=e("p",{class:"delete-hint"},[g("æ­¤æ“ä½œå°†åˆ é™¤è¯¥ç‰ˆæœ¬çš„æ‰€æœ‰æ–‡ä»¶ï¼Œä¸”"),e("strong",null,"æ— æ³•æ¢å¤"),g("ã€‚")],-1)),e("div",Ws,[s[15]||(s[15]=e("label",{class:"confirm-label"},[g("è¯·è¾“å…¥ "),e("code",null,"ç¡®è®¤åˆ é™¤"),g(" ä»¥ç»§ç»­ï¼š")],-1)),U(e("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>i.value=n),type:"text",class:"confirm-input",placeholder:"ç¡®è®¤åˆ é™¤",onKeyup:Ne(oe,["enter"])},null,544),[[D,i.value]])])]),e("div",Ys,[e("button",{class:"modal-btn modal-btn-cancel",onClick:Q},"å–æ¶ˆ"),e("button",{class:"modal-btn modal-btn-delete",disabled:i.value!=="ç¡®è®¤åˆ é™¤"||S.value,onClick:oe},[S.value?(l(),o("span",st)):f("",!0),g(" "+c(S.value?"åˆ é™¤ä¸­...":"åˆ é™¤"),1)],8,et)])])])):f("",!0)]))]),k.value.length>0?(l(),o("div",tt,[s[30]||(s[30]=ce('<div class="settings-header" data-v-fd3b37cc><h4 class="subsection-title" data-v-fd3b37cc><img src="'+qe+'" class="subsection-icon-img" alt="è¿è¡Œ" data-v-fd3b37cc> å¯åŠ¨è®¾ç½® </h4><div class="auto-calc-hint" data-v-fd3b37cc><span class="hint-icon" data-v-fd3b37cc>âœ¨</span><span class="hint-text" data-v-fd3b37cc>å·²æ ¹æ®æ‚¨çš„ç”µè„‘é…ç½®è‡ªåŠ¨è®¡ç®—å‚æ•°</span></div></div>',1)),e("div",at,[e("div",lt,[s[19]||(s[19]=e("label",{class:"launch-label"},[e("img",{src:de,class:"label-icon-img",alt:"å†…å­˜"}),e("span",{class:"label-text"},"æœ€å°å†…å­˜ (GB)")],-1)),U(e("input",{"onUpdate:modelValue":s[1]||(s[1]=n=>T.value=n),type:"number",min:"1",max:"32",placeholder:"æœ€å°å†…å­˜åˆ†é…",class:"launch-input"},null,512),[[D,T.value,void 0,{number:!0}]]),s[20]||(s[20]=e("div",{class:"param-hint"},"æ¸¸æˆå¯åŠ¨æ—¶åˆ†é…çš„åˆå§‹å†…å­˜å¤§å°",-1))]),e("div",ot,[s[21]||(s[21]=e("label",{class:"launch-label"},[e("img",{src:de,class:"label-icon-img",alt:"å†…å­˜"}),e("span",{class:"label-text"},"æœ€å¤§å†…å­˜ (GB)")],-1)),U(e("input",{"onUpdate:modelValue":s[2]||(s[2]=n=>j.value=n),type:"number",min:"1",max:"32",placeholder:"æœ€å¤§å†…å­˜åˆ†é…",class:"launch-input"},null,512),[[D,j.value,void 0,{number:!0}]]),s[22]||(s[22]=e("div",{class:"param-hint"},"æ¸¸æˆè¿è¡Œæ—¶å¯ä½¿ç”¨çš„æœ€å¤§å†…å­˜",-1))]),e("div",nt,[s[24]||(s[24]=e("label",{class:"launch-label"},[e("img",{src:De,class:"label-icon-img",alt:"é—ªç”µ"}),e("span",{class:"label-text"},"åƒåœ¾å›æ”¶å™¨")],-1)),U(e("select",{"onUpdate:modelValue":s[3]||(s[3]=n=>A.value=n),class:"launch-select"},[...s[23]||(s[23]=[e("option",{value:"G1GC"},"G1GC (æ¨è)",-1),e("option",{value:"ZGC"},"ZGC (ä½å»¶è¿Ÿ)",-1),e("option",{value:"ParallelGC"},"ParallelGC (é«˜åå)",-1)])],512),[[me,A.value]]),s[25]||(s[25]=e("div",{class:"param-hint"},"æ§åˆ¶å†…å­˜å›æ”¶æ–¹å¼ï¼ŒG1GCé€‚åˆå¤§å¤šæ•°æƒ…å†µ",-1))]),e("div",it,[e("button",{onClick:s[4]||(s[4]=n=>q.value=!q.value),class:"toggle-btn"},[e("span",rt,c(q.value?"â–¼":"â–¶"),1),s[26]||(s[26]=e("span",null,"é«˜çº§é€‰é¡¹",-1))])]),q.value?(l(),o("div",ct,[e("div",dt,[s[27]||(s[27]=e("label",{class:"launch-label"},[e("span",{class:"label-icon"},"ğŸ”§"),e("span",{class:"label-text"},"é¢å¤– JVM å‚æ•°")],-1)),U(e("textarea",{"onUpdate:modelValue":s[5]||(s[5]=n=>F.value=n),placeholder:"å¯é€‰ï¼šè¾“å…¥é¢å¤–çš„ JVM å‚æ•°",class:"launch-textarea",rows:"2"},null,512),[[D,F.value]]),s[28]||(s[28]=e("div",{class:"param-hint"},"é«˜çº§ç”¨æˆ·å¯æ·»åŠ è‡ªå®šä¹‰ JVM å‚æ•°",-1))])])):f("",!0),e("div",ut,[e("button",{onClick:Pe,class:$(["launch-btn",{launching:L.value}]),disabled:L.value||!y.value},[e("span",pt,c(L.value?"â³":"ğŸš€"),1),e("span",mt,c(L.value?"å¯åŠ¨ä¸­...":"å¯åŠ¨æ¸¸æˆ"),1)],10,vt),e("button",{onClick:Me,class:"create-room-btn",disabled:!y.value||!O.value||r.value},[s[29]||(s[29]=e("span",{class:"btn-icon"},"ğŸŒ",-1)),e("span",gt,c(r.value?"æˆ¿é—´è¿è¡Œä¸­":"åˆ›å»ºè”æœºæˆ¿é—´"),1)],8,ft)])]),M.value?(l(),o("div",bt,[e("pre",null,c(M.value),1)])):f("",!0)])):f("",!0)]),e("div",yt,[H(_)||H(b)?(l(),o("div",_t,[s[33]||(s[33]=e("div",{class:"login-info-header"},[e("span",{class:"info-icon"},"ğŸ‘¤"),e("span",{class:"info-title"},"å½“å‰è´¦å·")],-1)),e("div",ht,[H(_)?(l(),o("div",kt,[...s[31]||(s[31]=[e("span",{class:"type-badge genuine"},"âœ“ æ­£ç‰ˆè´¦å·",-1)])])):H(b)?(l(),o("div",$t,[...s[32]||(s[32]=[e("span",{class:"type-badge offline"},"âš¡ ç¦»çº¿æ¨¡å¼",-1)])])):f("",!0)])])):f("",!0),r.value?(l(),o("div",wt,[e("div",Ct,[e("span",xt,c(Se(r.value.status)),1),e("div",Mt,[e("h3",Gt,c(r.value.name),1),e("span",{class:$(["room-status-badge",r.value.status])},c(ne(r.value.status)),3)])]),e("div",Vt,[e("div",Tt,[s[34]||(s[34]=e("span",{class:"detail-label"},"å­˜æ¡£",-1)),e("span",jt,c(r.value.save_name),1)]),e("div",St,[s[35]||(s[35]=e("span",{class:"detail-label"},"ç«¯å£",-1)),e("span",Rt,c(r.value.port),1)]),e("div",Pt,[s[36]||(s[36]=e("span",{class:"detail-label"},"æ¨¡å¼",-1)),e("span",Lt,c(Re(r.value.game_mode)),1)]),e("div",Bt,[s[37]||(s[37]=e("span",{class:"detail-label"},"æˆ¿é—´ç±»å‹",-1)),e("span",{class:$(["detail-value",r.value.has_password?"private":"public"])},c(r.value.has_password?"ğŸ”’ åŠ å¯†æˆ¿é—´":"ğŸŒ å…¬å¼€æˆ¿é—´"),3)]),r.value.virtual_ip?(l(),o("div",It,[s[38]||(s[38]=e("span",{class:"detail-label"},"è™šæ‹ŸIP",-1)),e("span",Xt,c(r.value.virtual_ip),1)])):f("",!0)]),r.value.status==="open"?(l(),o("div",Ut,[s[39]||(s[39]=e("div",{class:"connect-title"},"ğŸ‰ æˆ¿é—´å·²å¼€æ”¾ï¼",-1)),s[40]||(s[40]=e("div",{class:"connect-hint"},"å¥½å‹å¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€è¿æ¥ï¼š",-1)),e("div",At,[e("code",null,c(r.value.virtual_ip)+":"+c(r.value.port),1),e("button",{class:"copy-btn",onClick:je},"ğŸ“‹")])])):f("",!0),r.value.status!=="closed"?(l(),o("button",{key:1,class:"close-room-btn",onClick:Ve},[...s[41]||(s[41]=[e("span",null,"âœ•",-1),g(" å…³é—­æˆ¿é—´ ",-1)])])):f("",!0)])):f("",!0),r.value?f("",!0):(l(),o("div",Ot,[e("div",{class:"section-header",style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"16px"}},[s[42]||(s[42]=e("h3",{class:"section-title",style:{margin:"0",border:"none"}},"ğŸ“¡ å±€åŸŸç½‘æˆ¿é—´",-1)),e("button",{onClick:W,class:"qq-btn qq-btn-primary",style:{padding:"6px 12px","font-size":"13px"}},"åˆ·æ–°")]),C.value?(l(),o("div",Nt,[...s[43]||(s[43]=[e("span",{class:"loading-icon"},"â³",-1),e("span",null,"æ­£åœ¨æœç´¢æˆ¿é—´...",-1)])])):h.value.length===0?(l(),o("div",Ft,[...s[44]||(s[44]=[e("div",{class:"empty-icon"},"ğŸ“¡",-1),e("div",{class:"empty-text"},"æœªå‘ç°å±€åŸŸç½‘æˆ¿é—´",-1),e("div",{class:"delete-hint",style:{margin:"0"}},"è¯·ç¡®ä¿æ‚¨å’Œæˆ¿ä¸»å·²è¿æ¥åˆ°åŒä¸€è™šæ‹Ÿç½‘ç»œ",-1)])])):(l(),o("div",qt,[(l(!0),o(ee,null,se(h.value,n=>(l(),o("div",{key:n.room_id,class:"version-card",style:{display:"block",cursor:"default","margin-bottom":"12px"}},[e("div",Dt,[e("div",Et,[s[45]||(s[45]=e("div",{class:"version-icon-wrapper loader-vanilla",style:{width:"44px",height:"44px"}},"ğŸ®",-1)),e("div",null,[e("div",Jt,c(n.name),1),e("div",zt,"æˆ¿ä¸»: "+c(n.host_player),1)])]),e("span",{class:$(["room-status-badge",n.status])},c(ne(n.status)),3)]),e("div",Ht,[s[46]||(s[46]=e("div",{class:"connect-hint"},"æœåŠ¡å™¨åœ°å€ï¼š",-1)),e("div",Zt,[e("code",null,c(n.virtual_ip)+":"+c(n.port),1),e("button",{class:"copy-btn",onClick:B=>Te(n),title:"å¤åˆ¶åœ°å€"},"ğŸ“‹",8,Kt)])])]))),128))]))])),w.value?f("",!0):(l(),o("div",Qt,[...s[47]||(s[47]=[ce('<div class="card-header" data-v-fd3b37cc><h3 class="section-title" data-v-fd3b37cc>ğŸŒ è”æœºé…ç½®</h3><div class="card-subtitle" data-v-fd3b37cc>é€šè¿‡è™šæ‹Ÿç½‘ç»œä¸å¥½å‹è”æœº</div></div><div class="network-guide" data-v-fd3b37cc><div class="guide-item" data-v-fd3b37cc><div class="guide-icon" data-v-fd3b37cc>ğŸ®</div><div class="guide-content" data-v-fd3b37cc><div class="guide-title" data-v-fd3b37cc>è™šæ‹Ÿå±€åŸŸç½‘è”æœº</div><div class="guide-text" data-v-fd3b37cc>é€šè¿‡ Easytier è™šæ‹Ÿç½‘ç»œï¼Œæ‚¨å¯ä»¥ä¸å¥½å‹è½»æ¾è”æœº</div></div></div><div class="guide-item" data-v-fd3b37cc><div class="guide-icon" data-v-fd3b37cc>ğŸ“¡</div><div class="guide-content" data-v-fd3b37cc><div class="guide-title" data-v-fd3b37cc>å¯åŠ¨ç½‘ç»œ</div><div class="guide-text" data-v-fd3b37cc>è¯·å…ˆåœ¨ã€Œç½‘ç»œç®¡ç†ã€ä¸­å¯åŠ¨ Easytier ç½‘ç»œ</div></div></div><div class="guide-item" data-v-fd3b37cc><div class="guide-icon" data-v-fd3b37cc>ğŸ”—</div><div class="guide-content" data-v-fd3b37cc><div class="guide-title" data-v-fd3b37cc>è¿æ¥æˆ¿é—´</div><div class="guide-text" data-v-fd3b37cc>ç¡®ä¿æ‚¨å’Œå¥½å‹éƒ½å·²è¿æ¥åˆ°åŒä¸€è™šæ‹Ÿç½‘ç»œ</div></div></div></div>',2)])]))])]),re(Bs,{show:V.value,"selected-version":y.value,username:ye.value,uuid:_e.value,"access-token":he.value,"jvm-args":te(),onClose:s[6]||(s[6]=n=>V.value=!1),onCreated:Ge},null,8,["show","selected-version","username","uuid","access-token","jvm-args"])])}}}),ea=be(Wt,[["__scopeId","data-v-fd3b37cc"]]);export{ea as default};
